import{r as a,j as e}from"../vendor/react-DITM8GMD.js";import{T as L}from"../components/theme-toggle.tsx-0zNXcFKB.js";import{H as O}from"../components/header.tsx-CwVgLJTK.js";import{I as P}from"../components/input-form.tsx-Dxelmz7g.js";import{R as $}from"../components/results-section.tsx-DD1MO54a.js";import{L as B}from"../components/loading-overlay.tsx-CgfnBprL.js";import{u as M}from"../hooks/use-theme.tsx-CjfsWyRr.js";import{B as q}from"../components/background-pattern.tsx-BGEAO5nI.js";import{D as z}from"../components/decoration-elements.tsx-BoccBXf5.js";import{F as A}from"../components/footer.tsx-D06feQIQ.js";import{a as J}from"../vendor/framer-motion-Did_cceX.js";function te({lang:o}){const[n,f]=a.useState(""),[l,d]=a.useState(""),[p,h]=a.useState(!1),[k,c]=a.useState(null),[m,g]=a.useState(null),[v,x]=a.useState(null),[S,T]=a.useState("idle"),[j,y]=a.useState(!1),[R,b]=a.useState(!1),{darkMode:t,setDarkMode:D}=M(),E=J(),C=async s=>{s.preventDefault();const r=s.currentTarget.querySelector("input");r instanceof HTMLInputElement&&r.blur(),h(!0),l?await w():T("turnstile")},w=async()=>{var r;const s=document.getElementById("username");try{T("roasting");const i=await fetch(`/${o}/fetch-data`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({username:n,turnstileToken:l})}),u=await i.json();if(!i.ok||!u.success){c(u.message||(o=="en"?"Something went wrong, please refresh the page and try again":"Terjadi kesalahan, silahkan refresh halaman dan coba lagi")),s==null||s.focus();return}const{dataProfile:N,roastText:I}=u;x(N),g(I),y(!0),c(null)}catch(i){c(o=="en"?"Something went wrong, please refresh the page and try again":"Terjadi kesalahan, silahkan refresh halaman dan coba lagi"),console.error(i),s==null||s.focus()}finally{h(!1)}},F=()=>{y(!1),g(null),x(null),f(""),d("")},H=()=>{m&&(navigator.clipboard.writeText(`Roast for @${n}:

${m}`),b(!0),setTimeout(()=>{b(!1)},2e3))};return e.jsxs("main",{className:`min-h-screen font-mono overflow-x-hidden transition-colors duration-300 ${t?"bg-zinc-900":"bg-gray-200"} relative`,children:[e.jsx(q,{darkMode:t}),e.jsx(L,{darkMode:t,setDarkMode:D}),e.jsxs("div",{className:"relative w-full z-10",children:[e.jsx(z,{darkMode:t}),e.jsx(O,{showResults:j,resetForm:F,darkMode:t,lang:o}),e.jsxs("div",{className:"pt-20 md:pt-24 pb-8 md:pb-10 px-3 md:px-8",children:[j?e.jsx($,{username:n,profileData:v,roast:m,darkMode:t,copied:R,copyToClipboard:H,lang:o}):e.jsx(P,{username:n,setUsername:f,turnstileToken:l,setTurnstileToken:d,stage:S,handleSubmit:C,fetchData:w,loading:p,error:k,darkMode:t,flameControls:E,lang:o}),p&&e.jsx(B,{stage:S,darkMode:t,lang:o})]})]}),e.jsx(A,{darkMode:t})]})}export{te as H};

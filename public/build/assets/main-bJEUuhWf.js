import{r as o,j as e}from"./js/vendor/react-DITM8GMD.js";import{T as L}from"./js/components/theme-toggle.tsx-An-jWFwx.js";import{H as O}from"./js/components/header.tsx-DjiEdAQU.js";import{I as P}from"./js/components/input-form.tsx-FPnOHr9J.js";import{R as $}from"./js/components/results-section.tsx-BhETadg2.js";import{L as B}from"./js/components/loading-overlay.tsx-CgfnBprL.js";import{u as M}from"./js/hooks/use-theme.tsx-CjfsWyRr.js";import{B as q}from"./js/components/background-pattern.tsx-ikEXrrIs.js";import{D as z}from"./js/components/decoration-elements.tsx-BoccBXf5.js";import{F as A}from"./js/components/footer.tsx-CAVXx0sc.js";import{a as J}from"./js/vendor/framer-motion-Did_cceX.js";import"./js/vendor/lucide-react-DzLLSNyd.js";import"./js/vendor/react-cloudflare-turnstile-BLy7yhGE.js";import"./js/vendor/html2canvas-BfYXEYrK.js";import"./js/vendor/marked-DK8KC6kv.js";import"./js/vendor/react-dom-DLscoSuv.js";import"./js/vendor/scheduler-BNqrtbQi.js";import"./js/vendor/react-icons-PX409zGV.js";import"./js/vendor/motion-utils-BDWe_Wef.js";import"./js/vendor/motion-dom-Di8Hrc7E.js";function ce({lang:a}){const[n,p]=o.useState(""),[l,f]=o.useState(""),[d,h]=o.useState(!1),[k,m]=o.useState(null),[c,g]=o.useState(null),[v,x]=o.useState(null),[S,T]=o.useState("idle"),[j,y]=o.useState(!1),[R,b]=o.useState(!1),{darkMode:t,setDarkMode:D}=M(),E=J(),C=async s=>{s.preventDefault();const r=s.currentTarget.querySelector("input");r instanceof HTMLInputElement&&r.blur(),h(!0),l?await w():T("turnstile")},w=async()=>{var r;const s=document.getElementById("username");try{T("roasting");const i=await fetch(`/${a}/fetch-data`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({username:n,turnstileToken:l})}),u=await i.json();if(!i.ok||!u.success){m(u.message||(a=="en"?"Something went wrong, please refresh the page and try again":"Terjadi kesalahan, silahkan refresh halaman dan coba lagi")),s==null||s.focus();return}const{dataProfile:N,roastText:I}=u;x(N),g(I),y(!0),m(null)}catch(i){m(a=="en"?"Something went wrong, please refresh the page and try again":"Terjadi kesalahan, silahkan refresh halaman dan coba lagi"),console.error(i),s==null||s.focus()}finally{h(!1)}},F=()=>{y(!1),g(null),x(null),p(""),f("")},H=()=>{c&&(navigator.clipboard.writeText(`Roast for @${n}:

${c}`),b(!0),setTimeout(()=>{b(!1)},2e3))};return e.jsxs("main",{className:`min-h-screen font-mono overflow-x-hidden transition-colors duration-300 ${t?"bg-zinc-900":"bg-gray-200"} relative`,children:[e.jsx(q,{darkMode:t}),e.jsx(L,{darkMode:t,setDarkMode:D}),e.jsxs("div",{className:"relative w-full z-10",children:[e.jsx(z,{darkMode:t}),e.jsx(O,{showResults:j,resetForm:F,darkMode:t}),e.jsxs("div",{className:"pt-20 md:pt-24 pb-8 md:pb-10 px-3 md:px-8",children:[j?e.jsx($,{username:n,profileData:v,roast:c,darkMode:t,copied:R,copyToClipboard:H,lang:a}):e.jsx(P,{username:n,setUsername:p,turnstileToken:l,setTurnstileToken:f,stage:S,handleSubmit:C,fetchData:w,loading:d,error:k,darkMode:t,flameControls:E,lang:a}),d&&e.jsx(B,{stage:S,darkMode:t,lang:a})]})]}),e.jsx(A,{darkMode:t})]})}export{ce as H};
